[{"title":"Get Started","layout":"default","sort":1,"content":"<h1 id=\"node-feature-discovery-operator\">Node Feature Discovery Operator</h1>\n\n<p>Welcome to Node Feature Discovery Operator – an Operator\nFramework implementation around the Node Feature Discovery project to enable\ndetecting hardware features and system configuration!</p>\n\n<p>Continue to:</p>\n\n<ul>\n <li>\n <p><strong><a href=\"/node-feature-discovery-operator/master/get-started/introduction.html\">Introduction</a></strong> for more details on the\nproject.</p>\n </li>\n <li>\n <p><strong><a href=\"/node-feature-discovery-operator/master/get-started/quick-start.html\">Quick start</a></strong> for quick step-by-step\ninstructions on how to get NFD running on your cluster.</p>\n </li>\n</ul>\n","dir":"/get-started/","name":"index.md","path":"get-started/index.md","url":"/get-started/"},{"title":"Introduction","layout":"default","sort":1,"content":"<h1 id=\"introduction\">Introduction</h1>\n\n<p>The Node Feature Discovery Operator manages the detection\nof hardware features and configuration in a Kubernetes\ncluster by labeling the nodes with hardware-specific information.\nThe Node Feature Discovery (NFD) will label the host with\nnode-specific attributes,\nlike PCI cards, kernel, or OS version, and many more.</p>\n\n<p>The NFD Operator is based on the <a href=\"https://operatorframework.io/\">Operator Framework</a>\nan open source toolkit to manage Kubernetes native applications, called\nOperators, in an effective, automated, and scalable way.</p>\n","dir":"/get-started/","name":"introduction.md","path":"get-started/introduction.md","url":"/get-started/introduction.html"},{"title":"Developer guide","layout":"default","sort":1,"content":"<h1 id=\"developer-guide\">Developer guide</h1>\n\n<h2 class=\"no_toc\" id=\"table-of-contents\">Table of contents</h2>\n\n<ol class=\"no_toc text-delta\" id=\"markdown-toc\">\n <li><a href=\"#developer-guide\" id=\"markdown-toc-developer-guide\">Developer guide</a> <ol>\n <li><a href=\"#building-the-operator\" id=\"markdown-toc-building-the-operator\">Building the operator</a> <ol>\n <li><a href=\"#download-the-source-code\" id=\"markdown-toc-download-the-source-code\">Download the source code</a></li>\n <li><a href=\"#build-the-operator-image\" id=\"markdown-toc-build-the-operator-image\">Build the operator image</a></li>\n </ol>\n </li>\n <li><a href=\"#manual-deployment-of-the-operator\" id=\"markdown-toc-manual-deployment-of-the-operator\">Manual deployment of the operator</a></li>\n <li><a href=\"#undeploy-the-operator\" id=\"markdown-toc-undeploy-the-operator\">Undeploy the operator</a></li>\n <li><a href=\"#clean-up-labels\" id=\"markdown-toc-clean-up-labels\">Clean up labels</a></li>\n </ol>\n </li>\n</ol>\n\n<h2 id=\"building-the-operator\">Building the operator</h2>\n\n<h3 id=\"download-the-source-code\">Download the source code</h3>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>git clone https://github.com/kubernetes-sigs/node-feature-discovery-operator\n</code></pre>  </div></div>\n\n<h3 id=\"build-the-operator-image\">Build the operator image</h3>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake image\n</code></pre>  </div></div>\n\n<p>Or for the <code class=\"language-plaintext highlighter-rouge\">minimal</code> variant</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake image-minimal\n</code></pre>  </div></div>\n\n<h4 id=\"push-the-container-image\">Push the container image</h4>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake push\n</code></pre>  </div></div>\n\n<p>Or for the <code class=\"language-plaintext highlighter-rouge\">minimal</code> variant</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake push-minimal\n</code></pre>  </div></div>\n\n<p>Alternatively, instead of specifying variables on the command line,\nyou can edit the Makefile to permanently change parameter defaults\nlike name of the image or namespace where the operator is deployed.</p>\n\n<h2 id=\"manual-deployment-of-the-operator\">Manual deployment of the operator</h2>\n\n<p>After building the image you can simply run</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake deploy\n</code></pre>  </div></div>\n\n<p>Then create a NodeFeatureDiscovery CR by running</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>kubectl apply <span class=\"nt\">-f</span> config/samples/nfd.kubernetes.io_v1_nodefeaturediscovery.yaml\n</code></pre>  </div></div>\n\n<h2 id=\"undeploy-the-operator\">Undeploy the operator</h2>\n\n<p>The operator will use the operand node-feature-discovery\nimage built from: <code class=\"language-plaintext highlighter-rouge\">https://github.com/kubernetes-sigs/node-feature-discovery</code></p>\n\n<p>To uninstall the operator run</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>make undeploy\n</code></pre>  </div></div>\n\n<h2 id=\"clean-up-labels\">Clean up labels</h2>\n\n<p>In case you need to reomve the labels created by NFD,\nthe source Makefile comes with a built in target</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>make clean-labels\n</code></pre>  </div></div>\n\n<p>This will clean all labels referencing to\n<code class=\"language-plaintext highlighter-rouge\">feature.node.kubernetes.io</code> and <code class=\"language-plaintext highlighter-rouge\">nfd.node.kubernetes.io</code></p>\n","dir":"/advanced/","name":"developer-guide.md","path":"advanced/developer-guide.md","url":"/advanced/developer-guide.html"},{"title":"Advanced","layout":"default","sort":2,"content":"<h1 id=\"advanced\">Advanced</h1>\n\n<p>Advanced topics and reference.</p>\n","dir":"/advanced/","name":"index.md","path":"advanced/index.md","url":"/advanced/"},{"title":"NodeFeatureDiscovery","layout":"default","sort":2,"content":"<h1 id=\"the-nodefeaturediscovery-cr\">The NodeFeatureDiscovery CR</h1>\n\n<p>The <code class=\"language-plaintext highlighter-rouge\">NodeFeatureDiscovery</code> CustomResource defines operational variables\nto define the behaviour of the Node Feature Discovery Operand,\nan example of the CustomResource:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">apiVersion</span><span class=\"pi\">:</span> <span class=\"s\">nfd.kubernetes.io/v1</span>\n<span class=\"na\">kind</span><span class=\"pi\">:</span> <span class=\"s\">NodeFeatureDiscovery</span>\n<span class=\"na\">metadata</span><span class=\"pi\">:</span>\n  <span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">nfd-master-server</span>\n  <span class=\"na\">namespace</span><span class=\"pi\">:</span> <span class=\"s\">node-feature-discovery-operator</span>\n<span class=\"na\">spec</span><span class=\"pi\">:</span>\n  <span class=\"na\">operand</span><span class=\"pi\">:</span>\n    <span class=\"na\">namespace</span><span class=\"pi\">:</span> <span class=\"s\">node-feature-discovery-operator</span>\n    <span class=\"na\">image</span><span class=\"pi\">:</span> <span class=\"s\">gcr.io/k8s-staging-nfd/node-feature-discovery:master</span>\n    <span class=\"na\">imagePullPolicy</span><span class=\"pi\">:</span> <span class=\"s\">Always</span>\n    <span class=\"na\">servicePort</span><span class=\"pi\">:</span> <span class=\"m\">12000</span>\n  <span class=\"na\">workerConfig</span><span class=\"pi\">:</span>\n    <span class=\"na\">configData</span><span class=\"pi\">:</span> <span class=\"pi\">|</span>\n      <span class=\"s\">#core:</span>\n      <span class=\"s\">#  labelWhiteList:</span>\n      <span class=\"s\">#  noPublish: false</span>\n      <span class=\"s\">#  sleepInterval: 60s</span>\n      <span class=\"s\">#  sources: [all]</span>\n      <span class=\"s\">#  klog:</span>\n      <span class=\"s\">#    addDirHeader: false</span>\n      <span class=\"s\">#    alsologtostderr: false</span>\n      <span class=\"s\">#    logBacktraceAt:</span>\n      <span class=\"s\">#    logtostderr: true</span>\n      <span class=\"s\">#    skipHeaders: false</span>\n      <span class=\"s\">#    stderrthreshold: 2</span>\n      <span class=\"s\">#    v: 0</span>\n      <span class=\"s\">#    vmodule:</span>\n      <span class=\"s\">##   NOTE: the following options are not dynamically run-time configurable</span>\n      <span class=\"s\">##         and require a nfd-worker restart to take effect after being changed</span>\n      <span class=\"s\">#    logDir:</span>\n      <span class=\"s\">#    logFile:</span>\n      <span class=\"s\">#    logFileMaxSize: 1800</span>\n      <span class=\"s\">#    skipLogHeaders: false</span>\n      <span class=\"s\">#sources:</span>\n      <span class=\"s\">#  cpu:</span>\n      <span class=\"s\">#    cpuid:</span>\n      <span class=\"s\">##     NOTE: whitelist has priority over blacklist</span>\n      <span class=\"s\">#      attributeBlacklist:</span>\n      <span class=\"s\">#        - \"BMI1\"</span>\n      <span class=\"s\">#        - \"BMI2\"</span>\n      <span class=\"s\">#        - \"CLMUL\"</span>\n      <span class=\"s\">#        - \"CMOV\"</span>\n      <span class=\"s\">#        - \"CX16\"</span>\n      <span class=\"s\">#        - \"ERMS\"</span>\n      <span class=\"s\">#        - \"F16C\"</span>\n      <span class=\"s\">#        - \"HTT\"</span>\n      <span class=\"s\">#        - \"LZCNT\"</span>\n      <span class=\"s\">#        - \"MMX\"</span>\n      <span class=\"s\">#        - \"MMXEXT\"</span>\n      <span class=\"s\">#        - \"NX\"</span>\n      <span class=\"s\">#        - \"POPCNT\"</span>\n      <span class=\"s\">#        - \"RDRAND\"</span>\n      <span class=\"s\">#        - \"RDSEED\"</span>\n      <span class=\"s\">#        - \"RDTSCP\"</span>\n      <span class=\"s\">#        - \"SGX\"</span>\n      <span class=\"s\">#        - \"SSE\"</span>\n      <span class=\"s\">#        - \"SSE2\"</span>\n      <span class=\"s\">#        - \"SSE3\"</span>\n      <span class=\"s\">#        - \"SSE4.1\"</span>\n      <span class=\"s\">#        - \"SSE4.2\"</span>\n      <span class=\"s\">#        - \"SSSE3\"</span>\n      <span class=\"s\">#      attributeWhitelist:</span>\n      <span class=\"s\">#  kernel:</span>\n      <span class=\"s\">#    kconfigFile: \"/path/to/kconfig\"</span>\n      <span class=\"s\">#    configOpts:</span>\n      <span class=\"s\">#      - \"NO_HZ\"</span>\n      <span class=\"s\">#      - \"X86\"</span>\n      <span class=\"s\">#      - \"DMI\"</span>\n      <span class=\"s\">#  pci:</span>\n      <span class=\"s\">#    deviceClassWhitelist:</span>\n      <span class=\"s\">#      - \"0200\"</span>\n      <span class=\"s\">#      - \"03\"</span>\n      <span class=\"s\">#      - \"12\"</span>\n      <span class=\"s\">#    deviceLabelFields:</span>\n      <span class=\"s\">#      - \"class\"</span>\n      <span class=\"s\">#      - \"vendor\"</span>\n      <span class=\"s\">#      - \"device\"</span>\n      <span class=\"s\">#      - \"subsystem_vendor\"</span>\n      <span class=\"s\">#      - \"subsystem_device\"</span>\n      <span class=\"s\">#  usb:</span>\n      <span class=\"s\">#    deviceClassWhitelist:</span>\n      <span class=\"s\">#      - \"0e\"</span>\n      <span class=\"s\">#      - \"ef\"</span>\n      <span class=\"s\">#      - \"fe\"</span>\n      <span class=\"s\">#      - \"ff\"</span>\n      <span class=\"s\">#    deviceLabelFields:</span>\n      <span class=\"s\">#      - \"class\"</span>\n      <span class=\"s\">#      - \"vendor\"</span>\n      <span class=\"s\">#      - \"device\"</span>\n      <span class=\"s\">#  custom:</span>\n      <span class=\"s\">#    - name: \"my.kernel.feature\"</span>\n      <span class=\"s\">#      matchOn:</span>\n      <span class=\"s\">#        - loadedKMod: [\"example_kmod1\", \"example_kmod2\"]</span>\n      <span class=\"s\">#    - name: \"my.pci.feature\"</span>\n      <span class=\"s\">#      matchOn:</span>\n      <span class=\"s\">#        - pciId:</span>\n      <span class=\"s\">#            class: [\"0200\"]</span>\n      <span class=\"s\">#            vendor: [\"15b3\"]</span>\n      <span class=\"s\">#            device: [\"1014\", \"1017\"]</span>\n      <span class=\"s\">#        - pciId :</span>\n      <span class=\"s\">#            vendor: [\"8086\"]</span>\n      <span class=\"s\">#            device: [\"1000\", \"1100\"]</span>\n      <span class=\"s\">#    - name: \"my.usb.feature\"</span>\n      <span class=\"s\">#      matchOn:</span>\n      <span class=\"s\">#        - usbId:</span>\n      <span class=\"s\">#          class: [\"ff\"]</span>\n      <span class=\"s\">#          vendor: [\"03e7\"]</span>\n      <span class=\"s\">#          device: [\"2485\"]</span>\n      <span class=\"s\">#        - usbId:</span>\n      <span class=\"s\">#          class: [\"fe\"]</span>\n      <span class=\"s\">#          vendor: [\"1a6e\"]</span>\n      <span class=\"s\">#          device: [\"089a\"]</span>\n      <span class=\"s\">#    - name: \"my.combined.feature\"</span>\n      <span class=\"s\">#      matchOn:</span>\n      <span class=\"s\">#        - pciId:</span>\n      <span class=\"s\">#            vendor: [\"15b3\"]</span>\n      <span class=\"s\">#            device: [\"1014\", \"1017\"]</span>\n      <span class=\"s\">#          loadedKMod : [\"vendor_kmod1\", \"vendor_kmod2\"]</span>\n</code></pre>  </div></div>\n\n<p>For more information about how to setup the <code class=\"language-plaintext highlighter-rouge\">WorkerConfig</code> stanza,\nsee\n<a href=\"https://kubernetes-sigs.github.io/node-feature-discovery/v0.9/advanced/worker-configuration-reference.html\">worker config reference</a></p>\n","dir":"/advanced/","name":"nodefeaturediscovery.md","path":"advanced/nodefeaturediscovery.md","url":"/advanced/nodefeaturediscovery.html"},{"title":"Quick start","layout":"default","sort":2,"content":"<h1 id=\"requirements\">Requirements</h1>\n\n<ol>\n <li>Linux (x86_64/Arm64/Arm)</li>\n <li><a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl\">kubectl</a>\n(properly set up and configured to work with your Kubernetes cluster)</li>\n</ol>\n\n<h1 id=\"quick-start\">Quick start</h1>\n\n<p>Get the source code</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>git clone <span class=\"nt\">-b</span> master https://github.com/kubernetes-sigs/node-feature-discovery-operator\n</code></pre>  </div></div>\n\n<p>Deploy the operator</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_TAG</span><span class=\"o\">=</span>gcr.io/k8s-staging-nfd/node-feature-discovery-operator:master\nmake deploy\n</code></pre>  </div></div>\n\n<p>Create a NodeFeatureDiscovery instance</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>kubectl apply <span class=\"nt\">-f</span> config/samples/nfd.kubernetes.io_v1_nodefeaturediscovery.yaml\n</code></pre>  </div></div>\n\n<h2 id=\"image-variants\">Image variants</h2>\n\n<p>Node-Feautre-Discovery-Operator currently offers two variants\nof the container image. The “full” variant is currently\ndeployed by default.</p>\n\n<h3 id=\"full\">Full</h3>\n\n<p>This image is based on\n<a href=\"https://hub.docker.com/_/debian\">debian:buster-slim</a> and contains a full Linux\nsystem for doing live debugging and diagnosis of the operator.</p>\n\n<h3 id=\"minimal\">Minimal</h3>\n\n<p>This is a minimal image based on\n<a href=\"https://github.com/GoogleContainerTools/distroless/blob/master/base/README.md\">gcr.io/distroless/base</a>\nand only supports running statically linked binaries.</p>\n\n<p>The container image tag has suffix <code class=\"language-plaintext highlighter-rouge\">-minimal</code>\n(e.g. <code class=\"language-plaintext highlighter-rouge\">gcr.io/k8s-staging-nfd/node-feature-discovery-operator:master-minimal</code>)</p>\n\n<h2 id=\"verify\">Verify</h2>\n\n<p>The Operator will deploy NFD based on the information\non the NodeFeatureDiscovery CR instance,\nafter a moment you should be able to see</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">$ </span>kubectl <span class=\"nt\">-n</span> node-feature-discovery-operator get ds,deploy\nNAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE\ndaemonset.apps/nfd-worker   3         3         3       3            3           &lt;none&gt;          5s\nNAME                         READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/nfd-master   1/1     1            1           17s\n</code></pre>  </div></div>\n\n<p>Check that NFD feature labels have been created</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">$ </span>kubectl get no <span class=\"nt\">-o</span> json | jq .items[].metadata.labels\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"beta.kubernetes.io/arch\"</span>: <span class=\"s2\">\"amd64\"</span>,\n  <span class=\"s2\">\"beta.kubernetes.io/os\"</span>: <span class=\"s2\">\"linux\"</span>,\n  <span class=\"s2\">\"feature.node.kubernetes.io/cpu-cpuid.ADX\"</span>: <span class=\"s2\">\"true\"</span>,\n  <span class=\"s2\">\"feature.node.kubernetes.io/cpu-cpuid.AESNI\"</span>: <span class=\"s2\">\"true\"</span>,\n  <span class=\"s2\">\"feature.node.kubernetes.io/cpu-cpuid.AVX\"</span>: <span class=\"s2\">\"true\"</span>,\n...\n</code></pre>  </div></div>\n","dir":"/get-started/","name":"quick-start.md","path":"get-started/quick-start.md","url":"/get-started/quick-start.html"},{"title":"Contributing","layout":"default","sort":3,"content":"<h1 id=\"contributing\">Contributing</h1>\n\n<hr />\n\n<h2 id=\"community\">Community</h2>\n\n<p>You can reach us via the following channels:</p>\n\n<ul>\n <li><a href=\"https://kubernetes.slack.com/messages/node-feature-discovery\">#node-feature-discovery</a>\nchannel in <a href=\"slack.k8s.io\">Kubernetes Slack</a></li>\n <li><a href=\"https://groups.google.com/g/kubernetes-sig-node\">SIG-Node</a> mailing list</li>\n <li>File an\n<a href=\"https://github.com/kubernetes-sigs/node-feature-discovery-operator/issues/new\">issue</a>\nin this repository</li>\n</ul>\n\n<h2 id=\"governance\">Governance</h2>\n\n<p>This is a\n<a href=\"https://github.com/kubernetes/community/blob/master/sig-node/README.md\">SIG-node</a>\nsubproject, hosted under the\n<a href=\"https://github.com/kubernetes-sigs\">Kubernetes SIGs</a> organization in Github.\nThe project was established in 2016 and was migrated to Kubernetes SIGs in 2018.</p>\n\n<h2 id=\"license\">License</h2>\n\n<p>This is open source software released under the <a href=\"LICENSE\">Apache 2.0 License</a>.</p>\n","dir":"/contributing/","name":"index.md","path":"contributing/index.md","url":"/contributing/"}]